<!doctype html>
<!--
    WELCOME TO THE STRIVE TEAM GENERATOR!
    The app is pretty straight forward, use Bootstrap to add the following features:
    - The user can add a list of names
    - The user can set the number of teams
    - Every time the user clicks on the "assign" button, a random name is placed in a team and removed from the list
    - Each team should be inside a "column"
    - [EXTRA] Create a button to remove an user from a team, putting him back in the main list
    - [EXTRA] Create a button to reset the state of the app
-->
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>

    </style>

</head>

<body>
    <main class="container">
        <div class="row">
            <div class="col">
                <input class="form-control m-3 bg-light" id="input_name" style="width: 50%;" type="text"
                    onchange="addToList(event)" placeholder="Enter Name">
            </div>
            <div class="col">
                <input class="form-control m-3 bg-light" style="width: 50%;" type="text"
                    onchange="getNumberOfTeams(event)" placeholder="Number of Teams">
            </div>
            <div class="col">
                <button type="button" class="btn btn-primary m-3" onclick="placeName()">Assign</button>
            </div>
        </div>
        <div class="row">
            ALL THE NAMES
            <div class="col">
                <ul id="names">

                </ul>

            </div>

        </div>

        <div class="row" id="teams">

        </div>

        <!-- EXTRAS
            <button type="button" class="btn btn-primary m-3">Reset</button>
            <button type="button" class="btn btn-primary m-3">Remove User</button> -->

    </main>

    <!-- Optional JavaScript -->
    <script>
        let number_of_teams = 0;
        let names_row = document.getElementById("names");
        let n = 1; //number for names id

        const addToList = function (event) {
            let name = event.target.value;
            let name_listed = document.createElement("li");
            name_listed.innerText = name;
            name_listed.id = "name" + n;
            names_row.appendChild(name_listed);
            let input_field = document.getElementById("input_name"); //TODO ???
            //input_field.reset();
            n++;
        }

        const getNumberOfTeams = function (teams) {
            //console.log(teams.target.value);
            number_of_teams = teams.target.value;
            let teams_row = document.getElementById("teams");
            for (let i = 0; i < teams.target.value; i++) {
                let column = document.createElement("div");
                column.setAttribute("class", "col");
                column.setAttribute("id", "teamid");
                column.innerText = "Team " + i;
                teams_row.appendChild(column);
            }
        }

        const placeName = function () {
            //gets a random number from 0 to list length
            let max_length = names_row.childNodes.length - 1;
            console.log(max_length);

            let random_number = Math.floor(Math.random() * (max_length - 1) + 1);
            console.log(random_number);
            let random_name = document.querySelector("#name" + random_number);
            let teams = document.querySelectorAll('#teamid');
            let new_item = document.createElement("li");
            new_item.innerText = random_name.innerText;
            names.removeChild(random_name);
            //names.removeChild
            //names_list.splice(random_number);
            teams[number_of_teams].appendChild(new_item);
            number_of_teams++;
            //teams[number_of_teams].target.value = random_name.innerText;

            //teams[number_of_teams].append;
            //names_list.splice(random_number, 1);
            //number_of_teams--;
        }
    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>
</body>

</html>