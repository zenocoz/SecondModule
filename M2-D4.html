<!doctype html>
<!--
    WELCOME TO THE STRIVE TEAM GENERATOR!
    The app is pretty straight forward, use Bootstrap to add the following features:
    - The user can add a list of names
    - The user can set the number of teams
    - Every time the user clicks on the "assign" button, a random name is placed in a team and removed from the list
    - Each team should be inside a "column"
    - [EXTRA] Create a button to remove an user from a team, putting him back in the main list
    - [EXTRA] Create a button to reset the state of the app
-->
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>

    </style>

</head>

<body>
    <main class="container">
        <div class="row">
            <div class="col">
                <input class="form-control m-3 bg-light" id="input_name" style="width: 50%;" type="text"
                    onchange="addToList(event)" placeholder="Enter Name">
            </div>
            <div class="col">
                <input class="form-control m-3 bg-light" style="width: 50%;" type="text"
                    onchange="getNumberOfTeams(event)" placeholder="Number of Teams">
            </div>
            <div class="col">
                <button type="button" class="btn btn-primary m-3" onclick="placeName()">Assign</button>
            </div>
        </div>
        <div class="row">
            ALL THE NAMES
            <div class="col">
                <ul id="names">

                </ul>

            </div>

        </div>

        <div class="row" id="teams">

        </div>

        <!-- EXTRAS
            <button type="button" class="btn btn-primary m-3">Reset</button>
            <button type="button" class="btn btn-primary m-3">Remove User</button> -->

    </main>

    <!-- Optional JavaScript -->
    <script>
        let MAX_TEAMS = 0;
        let number_of_teams = 0;
        let names_node = document.getElementById("names"); //node



        const addToList = function (event) {
            let name = event.target.value; //string
            let name_item = document.createElement("li"); //object
            name_item.innerText = name;
            name_item.id = "name";
            names_node.appendChild(name_item);
        }

        const getNumberOfTeams = function (teams) {
            MAX_TEAMS = teams.target.value; //stringified int
            let teams_node = document.getElementById("teams"); //node
            for (let i = 0; i < teams.target.value; i++) { //could be either string or int ??
                let column = document.createElement("div");
                column.setAttribute("class", "col");
                column.setAttribute("id", "teamid");
                column.innerText = "Team " + i;
                teams_node.appendChild(column);
            }
        }

        const placeName = function () {
            let random_names = document.querySelectorAll("#name");

            if (random_names.length > 0) {

                let max_length = names_node.childNodes.length;

                /*  for (let i = 0; i < random_names.length; i++) {
                     random_names[i].id = random_numbers[i];
                 } */
                //console.log(random_names);
                let random_index = Math.floor(Math.random() * random_names.length);
                let random_name = random_names[random_index];
                let teams = document.querySelectorAll('#teamid');
                let new_item = document.createElement("li");
                new_item.innerText = random_name.innerText;
                if (number_of_teams < MAX_TEAMS) {
                    teams[number_of_teams].appendChild(new_item);
                } else {
                    number_of_teams = 0;
                    teams[number_of_teams].appendChild(new_item);
                }
                names_node.removeChild(random_name);
                number_of_teams++;
            }

        }
    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>
</body>

</html>